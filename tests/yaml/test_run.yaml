desc: this is a test pipeline
datasets: [flat_events, staging, data, reporting]
batches:
  - desc: load test spreadsheet into bigquery      
    sheets:
    - table_desc: ref sheet1
      load_google_sheet:
        table_id: ref_sheet1
        dataset_id: test
        googlesheet_key: 19Jmapr9G1nrMcW2QTpY7sOvKYaFXnw5krK6dD0GwEqU
        googlesheet_link: https://docs.google.com/spreadsheets/d/19Jmapr9G1nrMcW2QTpY7sOvKYaFXnw5krK6dD0GwEqU/edit#gid=0
    - table_desc: make a second copy of ref sheet1
      load_google_sheet:
        table_id: ref_sheet2
        dataset_id: test
        googlesheet_key: 19Jmapr9G1nrMcW2QTpY7sOvKYaFXnw5krK6dD0GwEqU
        googlesheet_link: https://docs.google.com/spreadsheets/d/19Jmapr9G1nrMcW2QTpY7sOvKYaFXnw5krK6dD0GwEqU/edit#gid=0
  - desc: create table1 & table2 in staging       
    tables:
    - table_desc: table1
      create_table:
        table_id: table1
        dataset_id: test
        file: tests/sql/table1.sql
      pk:
      - col1
      - col2
      mock_data: 
        mock_file: sql/table1_mocked.sql
        output_table_name: "output_test_table" 
    - table_desc: table2
      create_table:
        table_id: table2
        dataset_id: test
        file: tests/sql/table2.sql
      pk:
      - col1
      - col2
      mock_data: 
        mock_file: sql/table1_mocked.sql
        output_table_name: "output_test_table"    
release:
  release_log: path_to_release_log.yml
  date: "2020-05-07"
  desc: "release of order-item to prod"
  files:
    - path_to_file1
    - path_to_file2
    - path_to_file3